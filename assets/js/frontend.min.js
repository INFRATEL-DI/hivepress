!function(e){"use strict";e(document).ready(function(){hivepress.getComponent("modal").each(function(){var t="#"+e(this).attr("id");e("a[href="+t+"], button[data-url="+t+"]").on("click",function(a){e.fancybox.close(),e.fancybox.open({src:t}),a.preventDefault()})}),hivepress.getComponent("form").each(function(){var t=e(this),a=t.find(hivepress.getSelector("messages")).first(),r=a.attr("class").split(" ")[0],s=t.find(".g-recaptcha"),i=e(".g-recaptcha").index(s.get(0)),o=t.find(":submit");!0===t.data("autosubmit")&&t.on("change",function(){t.submit()}),t.on("submit",function(n){a.hide().html("").removeClass(r+"--success "+r+"--error"),o.prop("disabled",!0),o.attr("data-state","loading"),"undefined"!=typeof tinyMCE&&tinyMCE.triggerSave(),t.data("action")&&(e.ajax({url:t.data("action"),method:t.data("method")?t.data("method"):t.attr("method"),data:t.serializeJSON(),beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",hivepressCoreData.apiNonce)},complete:function(n){var d=n.responseJSON;o.prop("disabled",!1),o.attr("data-state",""),"undefined"!=typeof grecaptcha&&s.length&&grecaptcha.reset(i),null===d||d.hasOwnProperty("data")?(t.data("message")&&a.addClass(r+"--success").html("<div>"+t.data("message")+"</div>").show(),t.data("redirect")?!0===t.data("redirect")?window.location.reload(!0):window.location.replace(t.data("redirect")):t.is("[data-id]")||t.trigger("reset")):d.hasOwnProperty("error")&&(d.error.hasOwnProperty("errors")?e.each(d.error.errors,function(e,t){a.append("<div>"+t.message+"</div>")}):d.error.hasOwnProperty("message")&&a.html("<div>"+d.error.message+"</div>"),a.is(":empty")||a.addClass(r+"--error").show()),a.is(":visible")&&t.offset().top<e(window).scrollTop()&&e("html, body").animate({scrollTop:t.offset().top},500)}}),n.preventDefault())})}),hivepress.getComponent("toggle").each(function(){var t=e(this);t.on("click",function(a){var r=t.attr("data-caption"),s=t.find("span");s.length?(t.attr("data-caption",s.text()),s.text(r)):(t.attr("data-caption",t.attr("title")),t.attr("title",r)),"active"!==t.attr("data-state")?t.attr("data-state","active"):t.attr("data-state",""),e.ajax({url:t.data("url"),method:"POST",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",hivepressCoreData.apiNonce)}}),a.preventDefault()})}),hivepress.getComponent("select").each(function(){var t=e(this),a={width:"100%",dropdownAutoWidth:!1,minimumResultsForSearch:20};"inline"===t.data("style")&&e.extend(a,{containerCssClass:"select2-selection--inline",dropdownCssClass:"select2-dropdown--inline",width:"resolve",dropdownAutoWidth:!0,minimumResultsForSearch:-1}),t.select2(a)}),hivepress.getComponent("file-upload").each(function(){var t=e(this),a=t.closest("label"),r=a.find("button").first(),s=a.parent().find(hivepress.getSelector("messages")).first(),i=a.parent().children("div").first();t.fileupload({url:t.data("url"),dataType:"json",paramName:"file",formData:{parent_model:t.closest("form").data("model"),parent_field:t.attr("name"),parent:t.closest("form").data("id"),render:!0,_wpnonce:hivepressCoreData.apiNonce},start:function(){t.prop("disabled",!0),r.prop("disabled",!0),r.attr("data-state","loading"),s.hide().html("")},stop:function(){t.prop("disabled",!1),r.prop("disabled",!1),r.attr("data-state","")},always:function(a,r){var o=r.jqXHR.responseJSON;o.hasOwnProperty("data")?t.prop("multiple")?i.append(o.data.html):i.html(o.data.html):o.hasOwnProperty("error")&&(o.error.hasOwnProperty("errors")?e.each(o.error.errors,function(e,t){s.append("<div>"+t.message+"</div>")}):o.error.hasOwnProperty("message")&&s.html("<div>"+o.error.message+"</div>"),s.is(":empty")||s.show())}})}),e(document).on("click",hivepress.getSelector("file-delete"),function(t){var a=e(this).parent();e.ajax({url:e(this).data("url"),method:"DELETE",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",hivepressCoreData.apiNonce)}}),a.remove(),t.preventDefault()}),hivepress.getComponent("sortable").each(function(){var t=e(this);t.sortable({stop:function(){t.children().length>1&&t.children().each(function(t){e.ajax({url:e(this).data("url"),method:"POST",data:{sort_order:t},beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",hivepressCoreData.apiNonce)}})})}})}),hivepress.getComponent("range-slider").each(function(){var t=e(this),a=e(this).find("input[type=number]"),r=a.first(),s=a.last(),i=null;r.val()||r.val(r.attr("min")),s.val()||s.val(s.attr("max")),(i=e("<div />").appendTo(t).slider({range:!0,min:Number(r.attr("min")),max:Number(s.attr("max")),values:[Number(r.val()),Number(s.val())],slide:function(e,t){r.val(t.values[0]),s.val(t.values[1])}})).wrap("<div />"),a.on("change",function(){r.val()||r.val(r.attr("min")),s.val()||s.val(s.attr("max")),i.slider("values",[Number(r.val()),Number(s.val())])})}),e(window).on("load",function(){e(window).width()>=768&&hivepress.getComponent("sticky").each(function(){var t=e(this),a=32+e("#wpadminbar").height();t.wrapInner("<div />"),t.children("div").stickySidebar({topSpacing:a,bottomSpacing:a})})}),hivepress.getComponent("carousel-slider").each(function(){if(e(this).find("img").length>1){var t=e(this),a=t.attr("class").split(" ")[0],r=t.find("img").wrap("<div />").parent().wrapAll("<div />").parent(),s=r.clone();t.html(""),r.appendTo(t),s.appendTo(t),r.addClass(a+"-slider").slick({slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,infinite:!1,arrows:!1,asNavFor:s}),s.addClass(a+"-carousel").slick({slidesToShow:6,slidesToScroll:1,infinite:!1,focusOnSelect:!0,prevArrow:'<div class="slick-arrow slick-prev"><i class="hp-icon fas fa-chevron-left"></i></div>',nextArrow:'<div class="slick-arrow slick-next"><i class="hp-icon fas fa-chevron-right"></i></div>',asNavFor:r,responsive:[{breakpoint:1025,settings:{slidesToShow:5}},{breakpoint:769,settings:{slidesToShow:4}},{breakpoint:481,settings:{slidesToShow:3}}]})}})})}(jQuery);
